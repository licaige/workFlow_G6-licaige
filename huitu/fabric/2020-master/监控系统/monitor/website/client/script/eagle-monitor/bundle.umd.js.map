{"version":3,"file":"bundle.umd.js","sources":["../../../../sdk/perf.js","../../../../sdk/errrCatch.js","../../../../sdk/index.js"],"sourcesContent":["export default {\n  init: cb => {\n    if (cb) cb();\n    // 过滤无效数据；\n    function filterTime(a, b) {\n      return a > 0 && b > 0 && a - b >= 0 ? a - b : undefined;\n    }\n    let Util = {\n      getPerfData: timing => {\n        let data = {\n          // 网络建连，找运维\n          pervPage: filterTime(timing.fetchStart, timing.navigationStart), // 上一个页面\n          redirect: filterTime(timing.responseEnd, timing.redirectStart), // 页面重定向时间\n          dns: filterTime(timing.domainLookupEnd, timing.domainLookupStart), // DNS查找时间\n          connect: filterTime(timing.connectEnd, timing.connectStart), // TCP建连时间\n          network: filterTime(timing.connectEnd, timing.navigationStart), // 网络总耗时\n\n          // 网络接收，找运维和后端\n          send: filterTime(timing.responseStart, timing.requestStart), // 前端从发送到接收到后端第一个返回\n          receive: filterTime(timing.responseEnd, timing.responseStart), // 接受页面时间\n          request: filterTime(timing.responseEnd, timing.requestStart), // 请求页面总时间\n\n          // 前端渲染\n          dom: filterTime(timing.domComplete, timing.domLoading), // dom解析时间\n          loadEvent: filterTime(timing.loadEventEnd, timing.loadEventStart), // loadEvent时间   可能有问题\n          frontend: filterTime(timing.loadEventEnd, timing.domLoading), // 前端总时间   可能有问题\n\n          // 关键阶段\n          load: filterTime(timing.loadEventEnd, timing.navigationStart), // 页面完全加载总时间   可能有问题\n          domReady: filterTime(\n            timing.domContentLoadedEventStart,\n            timing.navigationStart\n          ), // dom准备时间\n          interactive: filterTime(\n            timing.domInteractive,\n            timing.navigationStart\n          ), // 可操作时间\n          ttfb: filterTime(timing.responseStart, timing.navigationStart) // 首字节时间\n        };\n        return data;\n      }\n    };\n    let performance = window.performance;\n    window.addEventListener('load', () => {\n      setTimeout(() => {\n        let data = Util.getPerfData(performance.timing);\n        console.log(data);\n      }, 0); // 会出现负值，对应可能有问题; 因为我们在load事件中写的，此时loadEventEnd会出问题为0<DOMContentLoaded，DOMContentLoaded也是一样的道理\n    });\n  }\n};\n","export default {\n  init: (cb) => {\n    cb()\n  }\n}\n","import perf from './perf';\nimport errCatch from './errrCatch';\n\nconsole.log('222222');\nperf.init();\nerrCatch.init(() => console.log('66666'))\n"],"names":["init","cb","filterTime","a","b","undefined","Util","getPerfData","timing","data","pervPage","fetchStart","navigationStart","redirect","responseEnd","redirectStart","dns","domainLookupEnd","domainLookupStart","connect","connectEnd","connectStart","network","send","responseStart","requestStart","receive","request","dom","domComplete","domLoading","loadEvent","loadEventEnd","loadEventStart","frontend","load","domReady","domContentLoadedEventStart","interactive","domInteractive","ttfb","performance","window","addEventListener","setTimeout","console","log","perf","errCatch"],"mappings":"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"}