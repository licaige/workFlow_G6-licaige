## 如何判断 this 指向

- 看方法前面有没有 . 操作符，有的话就指向 . 前面的对象，没有就指向 window（严格模式下是 undefined，node 环境中是 global）
- 构造函数里面的 this 指向实例，包括 prototype 里面的 this 也是指向实例
- 绑定事件函数 this 指向绑定的元素，也就是当期操作元素
- 定时器里面的 this 指向 window，相当于 `window.setTimeout()`
- 立即执行函数里面的 this 指向 window
- 箭头函数中没有 this，应该去上下文中找，如果箭头函数绑定到某一个 obj，其绑定是无法更改的，new 也不行
- 通过 bind 方法绑定的 this 是永久性的绑定，之后再用 call、bind、apply 都是无效的，但是 new 可以，因为 bind 内部判断了是否是 new 出来的，如果是则以 new 的为准
- 执行环境定义了变量或函数有权访问的其他数据 ，决定了它们各自的行为。而每个执行环境都有一个与之相关的变量对象，环境中定义的所有变量和函数都保存在这个对象中。
- 当JavaScript解释器初始化执行代码时，它首先默认进入全局执行环境，从此刻开始，函数的每次调用都会创建一个新的执行环境。
- 执行环境可以分为创建和执行两个阶段。在创建阶段，解析器首先会创建一个变量对象（variable object，也称为活动对象activation object），它由定义在执行环境中的变量、函数声明、和参数组成。在这个阶段，作用域链会被初始化，this的值也会被最终确定。在执行阶段，代码被解释执行。
