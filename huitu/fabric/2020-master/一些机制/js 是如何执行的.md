参考：https://jelly.jd.com/article/5fae28102bd5b30156f6edcf

众所周知，JavaScript代码的执行顺序要经历语法分析，预编译，代码执行3个阶段。那么，每个阶段分别做了哪些事情，本文将会给大家一一讲解，并重点说明JavaScript预编译阶段的内容。

在程序中，有编译型和解释型2种语言，JavaScript是一种解释型语言。解释型语言并不能将源代码直接编译为机器能够识别的目标代码，而是将源代码翻译成中间代码，再由解释器对中间代码进行解释运行。这里的解释器就是大家经常说的JavaScript引擎，常见的JavaScript引擎有以下几种。

Mozilla浏览器：SpiderMonkey
Chrome浏览器：V8
Safari浏览器：JavaScriptCore
IE and Edge：Chakra
+Node.js：V8
解释型语言JavaScript，首先通过词法分析和语法分析得到语法树，然后预编译完成后，按照自上而下的顺序执行代码。

预编译发生在代码执行的前一刻，这阶段有几个核心点，希望大家牢记。重点来了，搬好小板凳！

- 函数声明提升：函数声明无论写到那个位置，在执行的时候都会把函数声明的语句提到最前（注意，此条不适用于函数表达式）；

- 变量声明提升：变量声明无论写到什么位置，在执行的时候都会提到最前执行（注意，只是变量的声明，如果声明并赋值了，此条就不在适用）。

- 函数声明置顶优于变量声明；

- 变量声明和赋值一起时，JavaScript预编译会将其拆分为2部分，分别是变量声明置顶，赋值语句保留在原来的位置；

- 声明过的变量不会重复声明（如果有同名变量的情况）。

JavaScript作用域：为可访问变量，对象，函数的集合。变量取值要到创建这个变量的函数作用域中取值，划重点，是创建，不是调用。
作用域链的查找规则：查找顺序是由里向外，如果在当前作用域中没有查找到值，就会去上级作用域中去查，直到查到全局作用域；内层作用域可以访问外层作用域中的变量，反之不行；所有末定义直接赋值的变量自动声明为拥有全局作用域。