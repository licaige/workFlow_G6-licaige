# 购物车

## 单件商品类 UIGoods

给商品数据封装了一层，

1. 增加属性：
    + 添加购物车数量

2. 添加方法：
    + 新增选择数量；
    + 减少选择数量；
    + 获取该商品总价；
    + 获取是否选择当前商品

## 界面数据类 UIData

给商品类又封装了一层，

1. 增加属性：
    + 起送价格；
    + 配送费

2. 添加方法：
    + 新增商品数量；
    + 减少商品数量；
    + 获取总共选中商品数量；
    + 获取购物车总价；
    + 判断购物车中是否有商品；
    + 判断购物车中商品总价是否达到起送标准


## 整个界面 UI

给界面数据类又又封装了一层，

1. 增加属性：
    + doms列表

2. 添加方法：
    + 新增商品数量；
    + 减少商品数量；
    + 监听各种事件；
    + 初始化商品列表html；
    + 判断购物车中是否有商品；
    + 更新某个商品元素的显示状态



## 抛物线动画

在横向上匀速运动，在纵轴上用贝萨尔曲线运动

```
<!-- css -->
.add-to-car {
  // ...
  transition: 0.5s linear;
}
.add-to-car .iconfont {
  // ...
  transition: 0.5s cubic-bezier(0.5, -0.5, 1, 1);
}
```

```
<!-- html -->
<div class="add-to-car">
  <div class="iconfont"></div>
</div>
```

```
<!-- js -->
doms = {
  car: '.add-to-car',
  icon: '.iconfont',
}
doms.car.style.transform = `translateX(start.x)`
doms.icon.style.transform = `translateY(start.y)`
<!-- 强制渲染，不添加会等js执行完才开始渲染，后者直接覆盖前者 -->
doms.car.clientWidth;
<!-- 更好的方式，requestAnimationFrame -->

doms.car.style.transform = `translateX(end.x)`
doms.icon.style.transform = `translateY(end.y)`

doms.car.addEventListener('transitionend', function () {
  console.log('过渡结束了')
  doms.car.remove()
}, {
  <!-- 只触发一次 -->
  once: true
})
```