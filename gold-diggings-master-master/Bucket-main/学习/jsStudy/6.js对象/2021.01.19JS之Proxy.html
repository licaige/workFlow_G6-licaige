<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 1.语法
        // const p = new Proxy(target, handler);

        // const handler = {
        //     get: function (obj, prop) {
        //         return prop in obj ? obj[prop] : 37
        //     }
        // }

        // const p = new Proxy({}, handler);
        // p.a = 1;
        // p.b = undefined;
        // console.log(p.a, p.b);
        // console.log('c' in p, p.a);

        // let target = {};
        // let p = new Proxy(target, {});
        // p.a = 100;
        // console.log(target.a);

        // let _default = 0
        // Object.defineProperty(window, 'a', {
        //     get() {
        //         return ++_default;
        //     }
        // })

        // let _default = 0;
        // const handler = {
        //     get: function (obj, prop) {
        //         return prop in obj ? ++_default : ++_default
        //     }
        // }
        // const p = new Proxy(window, handler);
        // console.log(p.a);
        // if (window.a === 1 && window.a === 2 && window.a === 3) {
        //     console.log('星空海绵');
        // } else {
        //     console.log('失败');
        // }

        // const a = new Proxy({}, {
        //     _default: 1,
        //     get: function () {
        //         return () => this._default++;
        //     }
        // });
        // console.log(a == 1 && a == 2 && a == 3); // true
        // if (a === 1 && a === 2 && a === 3) {
        //     console.log('成功');
        // } else {
        //     console.log('失败');
        // }

        // Object.defineProperty

        // 3.验证
        // let validator = {
        //     set(obj, prop, value) {
        //         if (prop === 'age') {
        //             if (!Number.isInteger(value)) {
        //                 throw new TypeError('age不是整数')
        //             }
        //             if (value > 200) {
        //                 throw new TypeError('age值无效')
        //             }
        //         }
        //         obj[prop] = value;
        //         return true
        //     }
        // }
        // let person = new Proxy({}, validator);
        // person.age = 100;
        // console.log(person.age);
        // person.age = 'young';
        // console.log(person.age);
        // person.age = 300;
        // console.log(person.age);

        // 4. 扩展构造函数

        function extend(sup, base) {
            let descriptor = Object.getOwnPropertyDescriptor
        }
    </script>
</body>

</html>