<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./js/jquery-3.3.1.min.js"></script>
    <script src="./js/lodash.js"></script>
    <title>Document</title>
</head>

<body>
    <div id="foo">
        <p id="foo"></p>
    </div>
    <script>
        // let dom = document.getElementById('foo');
        // console.log(dom);
        // arr.map((item,index) => {
        //     arr.map((i,index1) => {
        //         if(index !== index1 && item === i){
        //             arr.splice(index1,1);
        //         }
        //     })
        // })

        // function unique(array){
        //     for (let i = 0; i < array.length; i++) {
        //         for(let j = i+1; j < array.length; j++){
        //             if(array[i] === array[j]){
        //                 arr.splice(j,1);
        //             }
        //         }
        //     }
        //     return arr;
        // }
        // let arr = [1,5,6,1,9,9,2,1];
        // function unique(arr){
        //     if(!Array.isArray(arr)){
        //         console.log('type error');
        //         return;
        //     }
        //     let array = [];
        //     arr.map(item => {
        //         if(array.indexOf(item) === -1){
        //             array.push(item)
        //         }
        //     })
        //     return array;
        // }

        // console.log(unique(arr)); // [1, 5, 6, 9, 2]
        // function unique(arr) {
        //     return Array.from(new Set(arr))
        // }
        // console.log(arr); // [1, 5, 6, 9, 2]

        // let arr1 = new Set(arr);
        // arr = Array.from(arr1);

        // let arr = [1, 5, 6, 1, 9, 9, 9, 9, 9, 2, 1];
        // function unique(arr) {
        //     if (!Array.isArray(arr)) {
        //         console.log('type error!')
        //         return;
        //     }
        //     arr = arr.sort()
        //     let arrry = [arr[0]];
        //     arr.map((item, index) => {
        //         if (index > 0 && item !== arr[index - 1]) {
        //             arrry.push(item)
        //         }
        //     });
        //     return arrry;
        // }

        // console.log(unique(arr)); // [1, 2, 5, 6, 9]

        // let arr = [1, 5, 6, 1, 9, 9, 9, 9, 9, 2, 1];
        // let arr = 0;
        // function unique(arr) {
        //     // if (!Array.isArray(arr)) {
        //     //     console.log('type error!')
        //     //     return;
        //     // }
        //     return arr.filter((item, index) => {
        //         return arr.indexOf(item) === index;
        //     })
        // }

        // console.log(unique(arr)); // [1, 5, 6, 9, 2]

        // let arr = [1, 5, 6, 1, 9, 9, 9, 9, 9, 2, 1];
        // function unique(arr) {
        //     return [...new Set(arr)]
        // }
        // console.log(unique(arr)); // [1, 5, 6, 9, 2]

        // let arr = [1, 5, 6, 1, 9, 9, 9, 9, 9, 2, 1];
        // function unique(arr) {
        //     if (!Array.isArray(arr)) {
        //         console.log('type error!')
        //         return;
        //     }
        //     return arr.reduce((prev, cur, index) => prev.includes(cur) ? prev : [...prev, cur], []);
        // }

        // console.log(unique(arr)); // [1, 5, 6, 9, 2]

        // let obj = {
        //     name: '小明',
        //     age: 20,
        //     job: 'Software Engineer',
        //     friends: ['小花', '小丽']
        // }
        // let obj1 = JSON.parse(JSON.stringify(obj));
        // obj1.friends[0] = '小美';
        // console.log(obj.friends); // ["小花", "小丽"]
        // console.log(obj1.friends); // ["小美", "小丽"]

        // let obj = {
        //     name: '小明',
        //     age: 20,
        //     job: 'Software Engineer',
        //     friends: ['小花', '小丽'],
        //     name1: null,
        //     name2: undefined,
        //     name3() { },
        //     name4: NaN,
        //     name5: Symbol(),
        //     name6: [],
        // }
        // let obj1 = JSON.parse(JSON.stringify(obj));
        // console.log(obj);
        // console.log(obj1);

        // let obj = {
        //     name: {
        //         firstName: '小',
        //         lastName: '星',
        //     },
        //     age: 25,
        //     arr: [{ a: 10 }, { b: 50 }]
        // }
        // let obj2 = _.defaultsDeep({ arr: [{ a: 50 }] }, obj);
        // obj2.arr[0].a = 80;
        // obj2.name.firstName = '王';
        // console.log(obj);
        // console.log(obj2);
        // console.log(_.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } })
        // );

        // function copyObj(obj) {
        //     let obj1 = Array.isArray(obj) ? [] : {};
        //     for (const key in obj) {
        //         if (typeof obj[key] === 'object') {
        //             obj1[key] = copyObj(obj[key]);
        //         } else {
        //             obj1[key] = obj[key]
        //         }
        //     }
        //     return obj1
        // }
        // let obj2 = copyObj(obj);
        // let obj = {
        //     name: {
        //         firstName: '小',
        //         lastName: '星',
        //     },
        //     age: 25,
        //     sayName() { }
        // }
        // let obj2 = $.extend(true, {}, obj);
        // obj2.name.firstName = '王';
        // console.log(obj.name.firstName); // 小
        // console.log(obj2.name.firstName); // 王

        // let arr = [9, 10, 1, 0, 9, 1, 0];

        // console.log(arr); // [9, 10, 1, 0, 1]

        // let arr = [1, 5, 6, 1, 9, 9, 9, 9, 9, 2, 1];
        // function unique(arr) {
        //     if (!Array.isArray(arr)) {
        //         console.log('type error!')
        //         return;
        //     }
        //     return arr.map((item, index, array) => {
        //         if (array.indexOf(item) === index) {
        //             return item
        //         }
        //     })
        // }

        // console.log(unique(arr)); // [1, 5, 6, 9, 2]

        // function.bind(thisArg, [arg1[, arg2[, ...]]])
        // let arr = [1, 5, 6, 1, 9, 9, 2, 1];
        // function unique(array) {
        //     for (let i = 0; i < array.length; i++) {
        //         for (let j = i + 1; j < array.length; j++) {
        //             if (array[i] === array[j]) {
        //                 arr.splice(j, 1);
        //             }
        //         }
        //     }
        //     return arr;
        // }
        // console.log(unique(arr)); // [1, 5, 6, 9, 2]

        // console.dir(Function.prototype.bind());

        // function A() {
        //     console.log()
        // }
        // let obj = {
        //     age: 18,
        //     job: 'student'
        // }
        // function getInfo(name) {
        //     console.log(name); // 小花
        //     console.log(this.age); // 18
        //     console.log(this.job); // student
        // }
        // getInfo.apply(obj, ['小花']);
        // getInfo.call(obj, '小花');
        // let fn = getInfo.bind(obj, '小花')
        // console.dir(fn);

        // let obj = {
        //     age: 18,
        //     job: 'student'
        // }
        // function getInfo(name) {
        //     console.log(name); // 小花
        //     console.log(this.age); // 18
        //     console.log(this.job); // student
        // }
        // 手写apply方法思路：1.改变this指向 2.将第二个参数传进去
        // Function.prototype.myApply = function (context) {
        //     context = context || window; // 此时context为传进来的第一个参数
        //     // 这个this指向调用myApply的对象，也就是getInfo
        //     // 同时这行代码也展示了因为context调用的fn
        //     // 所以fn内部的this永远指向context
        //     context.fn = this;
        //     let result;
        //     if (arguments[1]) { // 如果存在第2个参数的话，将第二个参数传给方法
        //         result = context.fn(...arguments[1]);
        //     } else {
        //         result = context.fn();
        //     }
        //     delete context.fn;
        //     return result
        // }
        // getInfo.myApply(obj, ['小花']);

        // let obj = {
        //     name: '小王'
        // }
        // function getInfo(job) {
        //     console.log(this.name);
        //     console.log(job);
        // }
        // // getInfo.apply();
        // Function.prototype.myApply = function (context) {
        //     context = context || window;
        //     context.fn = this;
        //     let result;
        //     if (arguments[1]) {
        //         if (Array.isArray(arguments[1])) {
        //             result = context.fn(...arguments[1]);
        //         } else {
        //             console.error('Uncaught TypeError: CreateListFromArrayLike called on non-object');
        //         }

        //     } else {
        //         result = context.fn()
        //     }
        //     delete context.fn;
        //     return result;
        // }
        // getInfo.myApply(obj, ['student']);

        let obj = {
            age: 20
        }
        function getInfo(job) {
            console.log(job);
            console.log(this.age);
        }
        Function.prototype.myCall = function (context) {
            context = context || window;
            context.fn = this;
            let result;
            console.log(Array.from(arguments));
            let args = Array.from(arguments);
            console.log(args.shift());
            if (args.length > 0) {
                result = context.fn(...args)
            } else {
                result = context.fn()
            }
            delete context.fn;
            return result;
        }
        getInfo.myCall(obj, 'student');
    </script>
</body>

</html>