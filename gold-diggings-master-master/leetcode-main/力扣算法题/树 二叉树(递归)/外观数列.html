<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>

        // 给定一个正整数 n ，输出外观数列的第 n 项。
        // 外观数列: 描述上一个数列的数列

        // n=1时 输出
        // 1.   1
        // 2.   11 (一个1)
        // 3.   21 (两个1)
        // 4.   1211(一个2 一个1)
        // .......


        var countAndSay = function (n) {

            let cur = "1"

            const generate = (str) => {
                let res = ""
                let curNum;
                let count = 0

                for (let i = 0; i < str.length; i++) {
                    if (!curNum) {
                        curNum = str[i]
                        count++
                    }
                    //下一排数字时
                    else if (curNum !== str[i]) {
                        // 记录上一次扫描结果
                        res = res + count.toString() + curNum
                        curNum = str[i]
                        count = 1
                    }
                    else if (curNum == str[i]) {
                        count++
                    }
                    //扫描到结尾 
                    if (i === str.length - 1) {
                        res = res + count.toString() + curNum
                    }
                }

                return res
            }


            // 循环模拟递归
            for (let i = 1; i < n; i++) {
                cur = generate(cur)
            }

            return cur
        };


        console.log(countAndSay(4));
    </script>
</body>

</html>