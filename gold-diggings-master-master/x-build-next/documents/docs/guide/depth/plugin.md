# 插件（试验性）

X-BUILD 提供了一套基于 [Lerna](https://github.com/lerna/lerna) 的包管理工具，它存在的理由不同于一个 npm 包，我们通常安装的 npm 包都具备非常高的通用性，针对业务需求我们再做二次开发，那么不同项目之间，我们可能已经复制过很多次同样的组件或功能代码，不同项目可能会有微调（需要修改代码），这点 npm 包就很难符合我们的业务需求。

::: tip 为什么不直接放在模板中？
模板内提供了非常基础和核心的功能，基本可以覆盖所有项目，更多的场景下，我们的包很难复用到每一项目，那么我们独立管理，按需安装的方式会更加合理。

脚手架提供的功能只是让你更加方便的管理包和更方便的安装包。
:::

## 应用场景

为了提升效率，不再是复制粘贴代码，脚手架提供了以下的使用场景，更方便的管理你的每一个包：

- 使用脚手架提供的 add 指令，在选项列表中选择你的包（可多选）。
- 拷贝包内的源码到相应的路径。
- 在项目中安装已选中的包所需的所有依赖。

脚手架仅提供一些常用的 package，如果你想将自己的包加入到脚手架，你需要 fork X-BUILD 源码，以本脚手架为基础，创建一个属于你的脚手架。

## 创建一个 package

你可以使用以下命令创建一个新的 package：

```sh
lerna create [package]
```

所有的包在 `packages/` 目录下管理。

## 配置 package.json

创建包后，会自动生成 package.json 你需要添加或修改以下 2 个字段：

- description: 包的介绍，在使用 `x add` 命令时的选项提示。
- dest: 将 src 目录下的文件拷贝的目标路径。

示例：

```json{4,5}
{
  "name": "hook-loading",
  "version": "0.0.1",
  "description": "Hook - 加载状态",
  "dest": "src/hooks",
}
```
